<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatim Space | Ultimate Pro Edition</title>
    <style>
        :root { --primary: #00ff41; --bg: #0d0d0d; --toolbar: #1a1a1a; --text: #ffffff; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: 'Segoe UI', Tahoma, sans-serif; overflow: hidden; height: 100vh; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹ (Splash) */
        #splash {
            position: fixed; inset: 0; background: black; z-index: 9999;
            display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.8s;
        }
        .logo { font-size: 3.5rem; color: var(--primary); text-shadow: 0 0 20px var(--primary); margin: 0; }
        .dev { color: #555; font-family: monospace; margin-top: 10px; text-transform: uppercase; }
        .loader { width: 250px; height: 3px; background: #222; margin-top: 30px; border-radius: 5px; overflow: hidden; }
        .bar { width: 0%; height: 100%; background: var(--primary); transition: 0.3s; }

        /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        #app { opacity: 0; height: 100vh; display: flex; flex-direction: column; transition: 1s; }
        
        /* Ø´Ø±ÙŠØ· Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙˆÙˆØ±Ø¯ */
        .toolbar {
            background: var(--toolbar); padding: 10px; display: flex; flex-wrap: wrap;
            gap: 8px; border-bottom: 2px solid #333; align-items: center; box-shadow: 0 4px 10px rgba(0,0,0,0.5);
        }
        .btn-group { display: flex; gap: 4px; border-left: 1px solid #444; padding-left: 8px; margin-left: 4px; }
        .tool-btn {
            background: #2a2a2a; border: 1px solid #444; color: white; padding: 8px 12px; 
            border-radius: 4px; cursor: pointer; font-size: 0.9rem; transition: 0.2s;
        }
        .tool-btn:hover { background: var(--primary); color: black; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø±Ø± */
        .editor-frame { flex: 1; padding: 20px; overflow-y: auto; display: flex; justify-content: center; background: #121212; position: relative; }
        #editor {
            width: 100%; max-width: 900px; min-height: 100vh; background: white; color: black;
            padding: 50px; box-shadow: 0 0 30px rgba(0,0,0,0.5); outline: none; font-size: 18px; line-height: 1.6;
        }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø§Ø´ Ø§Ù„Ø°ÙƒÙŠØ© */
        #slash-menu {
            position: absolute; background: #1a1a1a; border: 1px solid var(--primary);
            border-radius: 8px; width: 280px; display: none; z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.8); padding: 8px; color: white;
        }
        .slash-item {
            padding: 10px; cursor: pointer; border-radius: 5px; display: flex; align-items: center; gap: 10px; transition: 0.2s;
        }
        .slash-item:hover { background: var(--primary); color: black; font-weight: bold; }

        /* Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¶Ø§ÙØ© */
        .todo-item { display: flex; align-items: center; gap: 10px; margin: 5px 0; }
        .project-card { border: 2px solid #00ff41; padding: 15px; border-radius: 8px; margin: 10px 0; background: #f9f9f9; }

        footer { background: #0a0a0a; padding: 10px 30px; border-top: 1px solid #333; display: flex; justify-content: space-between; font-size: 0.85rem; }
    </style>
</head>
<body>

    <div id="splash">
        <h1 class="logo">HATIM SPACE</h1>
        <div class="dev">BY HATIM AIT IJJOU</div>
        <div class="loader"><div class="bar" id="bar"></div></div>
    </div>

    <div id="app">
        <div class="toolbar">
            <div class="btn-group">
                <button class="tool-btn" onclick="exec('bold')"><b>B</b></button>
                <button class="tool-btn" onclick="exec('italic')"><i>I</i></button>
                <button class="tool-btn" onclick="exec('underline')"><u>U</u></button>
            </div>
            <div class="btn-group">
                <select onchange="exec('fontSize', this.value)">
                    <option value="3">Ø­Ø¬Ù… Ø¹Ø§Ø¯ÙŠ</option>
                    <option value="5">ÙƒØ¨ÙŠØ±</option>
                    <option value="7">Ø¶Ø®Ù…</option>
                </select>
                <input type="color" onchange="exec('foreColor', this.value)" title="Ù„ÙˆÙ† Ø§Ù„Ø®Ø·">
            </div>
            <div class="btn-group">
                <button class="tool-btn" onclick="exec('justifyRight')">â¡ï¸</button>
                <button class="tool-btn" onclick="exec('justifyCenter')">â†”ï¸</button>
                <button class="tool-btn" onclick="exec('insertUnorderedList')">â€¢ Ù‚Ø§Ø¦Ù…Ø©</button>
            </div>
            <div class="btn-group" style="border:none">
                <button class="tool-btn" onclick="saveFile()" style="background:#28a745">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ ÙˆØ­ÙØ¸</button>
                <button class="tool-btn" onclick="window.print()">ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©</button>
                <button class="tool-btn" onclick="clearAll()" style="background:#dc3545">ğŸ—‘ï¸ Ù…Ø³Ø­</button>
            </div>
        </div>

        <div class="editor-frame">
            <div id="editor" contenteditable="true" spellcheck="false">
                Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ø­Ø§ØªÙ…... Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… / Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ø§Ù… ÙˆÙ…Ø´Ø§Ø±ÙŠØ¹.
            </div>

            <div id="slash-menu">
                <div class="slash-item" onclick="insertTemplate('todo')"><span>âœ…</span> Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© (To-do List)</div>
                <div class="slash-item" onclick="insertTemplate('project')"><span>ğŸš€</span> Ø¥Ø¶Ø§ÙØ© Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯ (Project)</div>
                <div class="slash-item" onclick="insertTemplate('divider')"><span>â–</span> Ø¥Ø¶Ø§ÙØ© Ø®Ø· ÙØ§ØµÙ„</div>
                <div class="slash-item" onclick="saveFile()"><span>ğŸ’¾</span> Ø­ÙØ¸ ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù</div>
            </div>
        </div>

        <footer>
            <div>Ø¹Ø¯Ø¯ Ø§Ù„ÙƒÙ„Ù…Ø§Øª: <span id="wordCount">0</span></div>
            <div>ØµÙ†Ø¹ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬: <span style="color:var(--primary)">Hatim Ait Ijjou</span></div>
        </footer>
    </div>

    <script>
        const editor = document.getElementById('editor');
        const menu = document.getElementById('slash-menu');

        // Ø§Ù„Ø¥Ù‚Ù„Ø§Ø¹
        window.onload = () => {
            let p = 0;
            const b = setInterval(() => {
                p += 20; document.getElementById('bar').style.width = p + "%";
                if(p >= 100) {
                    clearInterval(b);
                    setTimeout(() => {
                        document.getElementById('splash').style.opacity = '0';
                        setTimeout(() => {
                            document.getElementById('splash').style.display = 'none';
                            document.getElementById('app').style.opacity = '1';
                            if(localStorage.getItem('hatim_data')) editor.innerHTML = localStorage.getItem('hatim_data');
                        }, 800);
                    }, 400);
                }
            }, 100);
        };

        function exec(cmd, val = null) { document.execCommand(cmd, false, val); }

        // Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ù„Ø§Ø´ Ø§Ù„Ø°ÙƒÙŠ
        editor.addEventListener('keyup', (e) => {
            const sel = window.getSelection();
            if (sel.rangeCount > 0) {
                const range = sel.getRangeAt(0);
                const text = range.startContainer.textContent.substring(0, range.startOffset);
                if (text.endsWith('/')) {
                    const rect = range.getBoundingClientRect();
                    menu.style.display = 'block';
                    menu.style.top = (rect.bottom + window.scrollY - 150) + 'px';
                    menu.style.left = rect.left + 'px';
                } else { menu.style.display = 'none'; }
            }
            updateStats();
        });

        function insertTemplate(type) {
            editor.focus();
            document.execCommand('delete', false, null); // Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø§Ø´
            if(type === 'todo') {
                const html = '<div class="todo-item"><input type="checkbox"> <span>Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©...</span></div><br>';
                document.execCommand('insertHTML', false, html);
            } else if(type === 'project') {
                const html = '<div class="project-card"><h3>ğŸš€ Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</h3><p>ÙˆØµÙ Ù…Ø®ØªØµØ± Ù„Ù„Ù…Ø´Ø±ÙˆØ¹...</p><small>Ø§Ù„Ø­Ø§Ù„Ø©: Ù‚ÙŠØ¯ Ø§Ù„ØªÙ†ÙÙŠØ°</small></div><br>';
                document.execCommand('insertHTML', false, html);
            } else if(type === 'divider') {
                document.execCommand('insertHTML', false, '<hr><br>');
            }
            menu.style.display = 'none';
        }

        function saveFile() {
            const blob = new Blob([editor.innerText], {type: "text/plain"});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = "Hatim_Space_Work.txt";
            a.click();
        }

        function clearAll() { if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø´ÙŠØ¡ØŸ")) editor.innerHTML = ""; }

        function updateStats() {
            const text = editor.innerText.trim();
            document.getElementById('wordCount').innerText = text ? text.split(/\s+/).length : 0;
            localStorage.setItem('hatim_data', editor.innerHTML);
        }

        document.addEventListener('click', (e) => { if(e.target.id !== 'editor') menu.style.display = 'none'; });
    </script>
</body>
</html>
