<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatim Space | Ù…Ù†ØµØ© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</title>
    <style>
        :root { --primary: #00ff41; --bg: #0a0a0a; --toolbar: #161616; --page: #ffffff; --chat-bg: #111; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…ØªØºÙŠØ±Ø© */
        #login-screen {
            position: fixed; inset: 0; background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
            z-index: 10000; display: flex; align-items: center; justify-content: center;
        }
        .login-card {
            background: rgba(20, 20, 20, 0.9); padding: 40px; border-radius: 20px;
            border: 1px solid #333; text-align: center; width: 350px; backdrop-filter: blur(10px);
            box-shadow: 0 0 50px rgba(0, 255, 65, 0.1);
        }
        .login-card h2 { color: var(--primary); margin-bottom: 5px; }
        .login-card p { color: #888; font-size: 0.9rem; margin-bottom: 20px; }
        .login-card input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #000; color: white; outline: none; box-sizing: border-box; }
        .btn-entry { width: 100%; padding: 14px; background: var(--primary); color: #000; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; font-size: 1rem; margin-top: 10px; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .toolbar { background: var(--toolbar); padding: 10px 20px; display: flex; gap: 10px; border-bottom: 1px solid #333; align-items: center; }
        .t-btn { background: #222; border: 1px solid #444; color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
        .t-btn:hover { background: var(--primary); color: black; }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¹Ù…Ù„ */
        .main-container { flex: 1; display: flex; overflow: hidden; }
        
        /* Ø§Ù„Ù…Ø­Ø±Ø± */
        .workspace { flex: 1; padding: 30px; overflow-y: auto; background: #1a1a1a; display: flex; justify-content: center; position: relative; }
        #editor {
            width: 100%; max-width: 800px; min-height: 1100px; background: var(--page); color: #222;
            padding: 60px; box-shadow: 0 0 40px rgba(0,0,0,0.5); outline: none; border-radius: 4px; font-size: 18px; line-height: 1.8;
        }

        /* Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        #chat-sidebar { width: 300px; background: var(--chat-bg); border-right: 1px solid #333; display: flex; flex-direction: column; }
        .chat-header { padding: 15px; background: #1a1a1a; border-bottom: 1px solid #333; font-weight: bold; color: var(--primary); }
        #chat-messages { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .msg { background: #1e1e1e; padding: 10px; border-radius: 8px; font-size: 0.85rem; border-right: 3px solid var(--primary); }
        .msg b { color: var(--primary); display: block; font-size: 0.75rem; margin-bottom: 3px; }
        
        .chat-input-area { padding: 15px; display: flex; gap: 5px; border-top: 1px solid #333; }
        #chat-input { flex: 1; background: #000; border: 1px solid #333; color: white; padding: 8px; border-radius: 5px; outline: none; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø§Ø´ */
        #slash-menu {
            position: absolute; background: #1a1a1a; border: 1px solid var(--primary);
            border-radius: 10px; width: 220px; display: none; z-index: 1000; padding: 8px;
        }
        .slash-item { padding: 10px; cursor: pointer; border-radius: 8px; display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
        .slash-item:hover { background: var(--primary); color: black; }

        footer { background: #000; padding: 10px 40px; border-top: 1px solid #222; display: flex; justify-content: space-between; font-size: 0.8rem; color: #555; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <h2>HATIM SPACE</h2>
            <p>Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø§Ù„ÙØ±ÙŠÙ‚</p>
            <input type="text" id="visitor-name" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§...">
            <input type="password" id="access-pass" placeholder="ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„ÙØ±ÙŠÙ‚ (1234)">
            <button class="btn-entry" onclick="entry()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
            <p id="login-err" style="color:#ff4444; display:none; margin-top:10px;">ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</p>
        </div>
    </div>

    <header class="toolbar">
        <div style="font-weight:bold; color:var(--primary); margin-left: 15px;">ğŸª HATIM SPACE</div>
        <button class="t-btn" onclick="f('bold')">B</button>
        <button class="t-btn" onclick="f('italic')">I</button>
        <button class="t-btn" onclick="f('underline')">U</button>
        <button class="t-btn" onclick="saveDoc()" style="background:#007bff">ğŸ“¥ ØªØ­Ù…ÙŠÙ„</button>
        <button class="t-btn" onclick="toggleChat()" id="chat-toggle">ğŸ’¬ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</button>
        <div style="margin-right:auto; font-size:0.8rem; color:var(--primary)" id="user-display"></div>
        <button class="t-btn" onclick="location.reload()" style="background:#bd2130">ğŸšª Ø®Ø±ÙˆØ¬</button>
    </header>

    <div class="main-container">
        <div id="chat-sidebar">
            <div class="chat-header">Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©</div>
            <div id="chat-messages">
                <div class="msg"><b>Ø§Ù„Ù†Ø¸Ø§Ù…</b> Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ÙØ¶Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ!</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." onkeypress="if(event.key==='Enter') sendMsg()">
                <button class="t-btn" onclick="sendMsg()">â†—ï¸</button>
            </div>
        </div>

        <div class="workspace">
            <div id="editor" contenteditable="true" spellcheck="false">
                <h1 id="welcome-msg">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø§Ù„ÙØ±ÙŠÙ‚</h1>
                <p>Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ù…Ø®ØµØµØ© Ù„Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ. Ø§ÙƒØªØ¨ / Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ø§Ù… Ø£Ùˆ Ø¬Ø¯Ø§ÙˆÙ„.</p>
            </div>
            <div id="slash-menu">
                <div class="slash-item" onclick="insert('task')">âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©</div>
                <div class="slash-item" onclick="insert('table')">ğŸ“Š Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„</div>
                <div class="slash-item" onclick="saveDoc()">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„</div>
            </div>
        </div>
    </div>

    <footer>
        <div>Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ: <b>Hatim Ait Ijjou</b></div>
        <div id="status-bar">Ø§Ù„Ø­Ø§Ù„Ø©: Ù…ØªØµÙ„</div>
    </footer>

    <script>
        let userName = "";
        const editor = document.getElementById('editor');
        const menu = document.getElementById('slash-menu');

        function entry() {
            const nameInput = document.getElementById('visitor-name').value;
            const passInput = document.getElementById('access-pass').value;
            
            if(nameInput.trim() !== "" && passInput === "1234") {
                userName = nameInput;
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('user-display').innerText = "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…: " + userName;
                document.getElementById('welcome-msg').innerText = "Ù…Ø±Ø­Ø¨Ø§Ù‹ " + userName + " ÙÙŠ Hatim Space";
                
                // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„Ø© Ø¯Ø®ÙˆÙ„ ÙÙŠ Ø§Ù„Ø´Ø§Øª
                addChatMessage("Ø§Ù„Ù†Ø¸Ø§Ù…", "Ø§Ù†Ø¶Ù… " + userName + " Ø¥Ù„Ù‰ Ù…Ù†ØµØ© Ø§Ù„Ø¹Ù…Ù„.");
            } else {
                document.getElementById('login-err').style.display = 'block';
            }
        }

        function toggleChat() {
            const chat = document.getElementById('chat-sidebar');
            chat.style.display = (chat.style.display === "none") ? "flex" : "none";
        }

        function addChatMessage(sender, text) {
            const msgDiv = document.createElement('div');
            msgDiv.className = "msg";
            msgDiv.innerHTML = `<b>${sender}</b> ${text}`;
            const container = document.getElementById('chat-messages');
            container.appendChild(msgDiv);
            container.scrollTop = container.scrollHeight;
        }

        function sendMsg() {
            const input = document.getElementById('chat-input');
            if(input.value.trim() !== "") {
                addChatMessage(userName, input.value);
                input.value = "";
            }
        }

        function f(cmd, val=null) { document.execCommand(cmd, false, val); }

        editor.addEventListener('keyup', (e) => {
            const sel = window.getSelection();
            if (sel.rangeCount > 0) {
                const range = sel.getRangeAt(0);
                const text = range.startContainer.textContent.substring(0, range.startOffset);
                if (text.endsWith('/')) {
                    const rect = range.getBoundingClientRect();
                    menu.style.display = 'block';
                    menu.style.top = (rect.bottom + window.scrollY - 100) + 'px';
                    menu.style.left = rect.left + 'px';
                } else { menu.style.display = 'none'; }
            }
        });

        function insert(type) {
            editor.focus(); document.execCommand('delete', false, null);
            if(type === 'task') f('insertHTML', '<div style="background:#f0fdf4; padding:10px; border-right:4px solid #00ff41; margin:10px 0; color:#222;">âœ… Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©: </div><br>');
            if(type === 'table') f('insertHTML', '<table border="1" style="width:100%; border-collapse:collapse; background:white; color:black;"><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø­Ø§Ù„Ø©</th></tr><tr><td>...</td><td>...</td></tr></table><br>');
            menu.style.display = 'none';
        }

        function saveDoc() {
            const blob = new Blob([editor.innerText], {type: "text/plain"});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = "Shared_Work.txt"; a.click();
        }

        document.addEventListener('click', (e) => { if(e.target.id !== 'editor') menu.style.display = 'none'; });
    </script>
</body>
</html>
