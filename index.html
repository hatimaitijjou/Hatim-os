<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZENITH OS | OMEGA</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #00ff88;
            --accent: #7000ff;
            --glass: rgba(20, 20, 30, 0.75);
            --border: 1px solid rgba(255,255,255,0.1);
            --blur: blur(25px);
            --font: 'Tajawal', sans-serif;
        }

        * { box-sizing: border-box; user-select: none; font-family: var(--font); outline: none; }
        body { margin: 0; overflow: hidden; background: #000; color: white; height: 100vh; }

        /* --- ÿßŸÑÿÆŸÑŸÅŸäÿ© ÿßŸÑÿØŸäŸÜÿßŸÖŸäŸÉŸäÿ© --- */
        #wallpaper {
            position: fixed; inset: 0; z-index: -1;
            background-size: cover; background-position: center;
            transition: background-image 0.5s ease;
        }
        #wallpaper::after { content:''; position: absolute; inset: 0; background: rgba(0,0,0,0.3); }

        /* --- ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ•ŸÇŸÑÿßÿπ (BIOS) --- */
        #boot-screen {
            position: fixed; inset: 0; background: #000; z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            font-family: monospace; color: var(--primary);
        }
        .matrix-text { font-size: 1.2rem; margin-bottom: 5px; opacity: 0; animation: fade 0.1s forwards; }
        @keyframes fade { to { opacity: 1; } }

        /* --- ÿßŸÑÿ¥ÿ±Ÿäÿ∑ ÿßŸÑÿπŸÑŸàŸä --- */
        #topbar {
            height: 35px; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px);
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
            border-bottom: var(--border); z-index: 5000; font-size: 0.9rem;
        }

        /* --- ÿ≥ÿ∑ÿ≠ ÿßŸÑŸÖŸÉÿ™ÿ® --- */
        #desktop { position: absolute; top: 35px; bottom: 80px; left: 0; right: 0; padding: 20px; display: flex; flex-direction: column; flex-wrap: wrap; align-content: flex-start; gap: 15px; }
        .icon {
            width: 90px; display: flex; flex-direction: column; align-items: center; cursor: pointer;
            padding: 10px; border-radius: 10px; transition: 0.2s; text-shadow: 0 2px 5px black;
        }
        .icon:hover { background: rgba(255,255,255,0.1); }
        .icon i { font-size: 2.5rem; margin-bottom: 8px; filter: drop-shadow(0 5px 10px rgba(0,0,0,0.5)); }

        /* --- ÿßŸÑŸÜŸàÿßŸÅÿ∞ --- */
        .window {
            position: absolute; background: #121215; border-radius: 12px; border: var(--border);
            display: flex; flex-direction: column; box-shadow: 0 30px 80px rgba(0,0,0,0.8);
            min-width: 400px; min-height: 300px; resize: both; overflow: hidden;
            animation: popUp 0.3s cubic-bezier(0.1, 0.9, 0.2, 1);
        }
        @keyframes popUp { from{transform:scale(0.9); opacity:0;} to{transform:scale(1); opacity:1;} }
        
        .win-head {
            height: 40px; background: #1c1c22; display: flex; justify-content: space-between; align-items: center;
            padding: 0 15px; cursor: grab; border-bottom: var(--border);
        }
        .win-controls { display: flex; gap: 8px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
        .close { background: #ff5555; } .min { background: #ffbd2e; } .max { background: #27c93f; }
        .win-body { flex: 1; position: relative; overflow: hidden; background: #0f0f12; }

        /* --- ÿ¥ÿ±Ÿäÿ∑ ÿßŸÑŸÖŸáÿßŸÖ (Dock) --- */
        #dock-container { position: fixed; bottom: 15px; left: 0; right: 0; display: flex; justify-content: center; z-index: 9000; }
        #dock {
            background: var(--glass); backdrop-filter: var(--blur); padding: 10px 20px;
            border-radius: 20px; border: var(--border); display: flex; gap: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
        }
        .dock-item {
            width: 50px; height: 50px; border-radius: 12px; background: rgba(255,255,255,0.05);
            display: flex; align-items: center; justify-content: center; font-size: 1.5rem;
            cursor: pointer; transition: 0.2s; position: relative;
        }
        .dock-item:hover { transform: translateY(-10px) scale(1.1); background: rgba(255,255,255,0.2); }
        .dock-item.active::after { content:''; position: absolute; bottom: -5px; width: 5px; height: 5px; background: var(--primary); border-radius: 50%; }

        /* --- ÿßŸÑŸÇŸàÿßÿ¶ŸÖ ŸàÿßŸÑÿ•ÿ¥ÿπÿßÿ±ÿßÿ™ --- */
        #context-menu {
            position: fixed; background: #1a1a1a; border: var(--border); width: 200px;
            border-radius: 8px; display: none; z-index: 9999; box-shadow: 0 10px 30px black;
        }
        .ctx-item { padding: 10px 15px; cursor: pointer; display: flex; gap: 10px; align-items: center; }
        .ctx-item:hover { background: var(--primary); color: black; }

        #toast {
            position: fixed; bottom: 100px; right: 20px; background: #1a1a1a; border-left: 4px solid var(--primary);
            padding: 15px 25px; border-radius: 8px; transform: translateX(200%); transition: 0.5s; z-index: 9999;
        }

        /* --- App Styles --- */
        .browser-bar { display: flex; gap: 10px; padding: 10px; background: #222; }
        .url-input { flex: 1; background: #111; border: none; color: white; padding: 5px 15px; border-radius: 20px; }
        .term-box { background: #0c0c0c; color: #00ff00; padding: 15px; height: 100%; font-family: monospace; overflow-y: auto; }
        .term-in { background: transparent; border: none; color: #00ff00; width: 100%; font-family: monospace; }
        .settings-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); gap: 10px; padding: 20px; }
        .wall-thumb { height: 60px; border-radius: 8px; cursor: pointer; border: 2px solid transparent; background-size: cover; }
        .wall-thumb:hover { border-color: var(--primary); }

    </style>
</head>
<body>

    <!-- Boot Sequence -->
    <div id="boot-screen"></div>

    <!-- Main Interface -->
    <div id="wallpaper"></div>
    
    <div id="topbar">
        <div style="display: flex; gap: 15px; align-items: center;">
            <i class="fab fa-connectdevelop" style="color: var(--primary);"></i>
            <b>ZENITH OMEGA</b>
        </div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <span id="users-online" style="color: #aaa; font-size: 0.8rem;">Online: 4B+</span>
            <i class="fas fa-wifi"></i>
            <span id="clock">12:00</span>
        </div>
    </div>

    <div id="desktop"></div>
    <div id="win-layer"></div>

    <div id="dock-container">
        <div id="dock"></div>
    </div>

    <div id="context-menu">
        <div class="ctx-item" onclick="WindowManager.open('settings')"><i class="fas fa-image"></i> ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑÿÆŸÑŸÅŸäÿ©</div>
        <div class="ctx-item" onclick="WindowManager.open('store')"><i class="fas fa-plus"></i> ÿ™ÿ´ÿ®Ÿäÿ™ ÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™</div>
        <div class="ctx-item" onclick="location.reload()"><i class="fas fa-sync"></i> ÿ•ÿπÿßÿØÿ© ÿ™ÿ¥ÿ∫ŸäŸÑ</div>
    </div>

    <div id="toast">ÿ™ŸÖ ÿßŸÑÿ≠ŸÅÿ∏ ÿ®ŸÜÿ¨ÿßÿ≠</div>

    <script>
        // --- 1. SYSTEM KERNEL (ÿßŸÑŸÇŸÑÿ® ÿßŸÑŸÜÿßÿ®ÿ∂) ---
        const System = {
            zIndex: 100,
            storage: 'zenith_omega_v1',
            config: {
                wallpaper: 'https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072',
                installedApps: ['files', 'browser', 'store', 'settings', 'notes'] // ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇÿßÿ™ ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©
            },
            
            appsDB: {
                'files': { name: 'ÿßŸÑŸÖŸÑŸÅÿßÿ™', icon: 'fas fa-folder', color: '#fbc531', type: 'files' },
                'browser': { name: 'ÿßŸÑŸàŸäÿ®', icon: 'fas fa-globe', color: '#00a8ff', type: 'web', url: 'https://bing.com' },
                'store': { name: 'ÿßŸÑŸÖÿ™ÿ¨ÿ±', icon: 'fas fa-shopping-bag', color: '#e84118', type: 'store' },
                'settings': { name: 'ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™', icon: 'fas fa-cog', color: '#7f8fa6', type: 'settings' },
                'notes': { name: 'ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™Ÿä', icon: 'fas fa-sticky-note', color: '#f1c40f', type: 'notes' },
                'term': { name: 'Terminal', icon: 'fas fa-terminal', color: '#44bd32', type: 'term' },
                'paint': { name: 'ÿßŸÑÿ±ÿ≥ÿßŸÖ', icon: 'fas fa-palette', color: '#8c7ae6', type: 'paint' },
                'media': { name: 'ŸÖŸäÿØŸäÿß', icon: 'fas fa-play-circle', color: '#c23616', type: 'iframe', url: 'https://www.youtube.com/embed/jfKfPfyJRdk' }
            },

            init: function() {
                this.loadConfig();
                this.bootSequence();
                this.startClock();
                
                // Context Menu
                document.addEventListener('contextmenu', e => {
                    e.preventDefault();
                    const cm = document.getElementById('context-menu');
                    cm.style.display = 'block';
                    cm.style.left = e.clientX + 'px'; cm.style.top = e.clientY + 'px';
                });
                document.addEventListener('click', () => document.getElementById('context-menu').style.display = 'none');
            },

            loadConfig: function() {
                const saved = localStorage.getItem(this.storage);
                if(saved) this.config = JSON.parse(saved);
                
                // Apply Wallpaper
                document.getElementById('wallpaper').style.backgroundImage = `url(${this.config.wallpaper})`;
                this.renderDesktop();
            },

            saveConfig: function() {
                localStorage.setItem(this.storage, JSON.stringify(this.config));
            },

            bootSequence: function() {
                const b = document.getElementById('boot-screen');
                const logs = ["Initializing Kernel...", "Loading User Data...", "Connecting to Zenith Cloud...", "System Ready."];
                let i = 0;
                const int = setInterval(() => {
                    if(i >= logs.length) {
                        clearInterval(int);
                        b.style.opacity = 0;
                        setTimeout(()=>b.style.display='none', 500);
                        this.showToast('ŸÖÿ±ÿ≠ÿ®ÿßŸã ÿ®ÿßŸÑŸÇÿßÿ¶ÿØ ÿ≠ÿßÿ™ŸÖ üëã');
                    } else {
                        b.innerHTML += `<div class="matrix-text">> ${logs[i]}</div>`;
                        i++;
                    }
                }, 400);
            },

            renderDesktop: function() {
                const desk = document.getElementById('desktop');
                const dock = document.getElementById('dock');
                desk.innerHTML = ''; dock.innerHTML = '';

                this.config.installedApps.forEach(key => {
                    const app = this.appsDB[key];
                    if(!app) return;
                    
                    // Desktop
                    desk.innerHTML += `
                    <div class="icon" onclick="WindowManager.open('${key}')">
                        <i class="${app.icon}" style="color:${app.color}"></i>
                        <span>${app.name}</span>
                    </div>`;

                    // Dock
                    dock.innerHTML += `
                    <div class="dock-item" id="dock-${key}" onclick="WindowManager.open('${key}')">
                        <i class="${app.icon}" style="color:${app.color}"></i>
                    </div>`;
                });
            },

            installApp: function(key) {
                if(!this.config.installedApps.includes(key)) {
                    this.config.installedApps.push(key);
                    this.saveConfig();
                    this.renderDesktop();
                    this.showToast(`ÿ™ŸÖ ÿ™ÿ´ÿ®Ÿäÿ™ ${this.appsDB[key].name}`);
                }
            },

            startClock: function() {
                setInterval(() => {
                    document.getElementById('clock').innerText = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'});
                }, 1000);
            },

            showToast: function(msg) {
                const t = document.getElementById('toast');
                t.innerText = msg;
                t.style.transform = 'translateX(0)';
                setTimeout(() => t.style.transform = 'translateX(200%)', 3000);
            }
        };

        // --- 2. WINDOW MANAGER ---
        const WindowManager = {
            open: function(key) {
                const app = System.appsDB[key];
                const wid = 'win-' + Date.now();
                const win = document.createElement('div');
                win.className = 'window'; win.id = wid; win.style.zIndex = ++System.zIndex;
                
                win.style.left = (50 + Math.random() * 50) + 'px';
                win.style.top = (50 + Math.random() * 50) + 'px';
                win.style.width = '700px'; win.style.height = '500px';

                win.innerHTML = `
                    <div class="win-head" onmousedown="WindowManager.drag(event, '${wid}')">
                        <div class="win-controls">
                            <div class="dot close" onclick="WindowManager.close('${wid}')"></div>
                            <div class="dot min" onclick="document.getElementById('${wid}').style.display='none'"></div>
                            <div class="dot max" onclick="WindowManager.max('${wid}')"></div>
                        </div>
                        <div style="font-weight:bold;">${app.name}</div>
                        <div style="width:50px;"></div>
                    </div>
                    <div class="win-body">${this.getContent(app, wid)}</div>
                `;

                win.onmousedown = () => win.style.zIndex = ++System.zIndex;
                document.getElementById('win-layer').appendChild(win);
                
                // Dock Animation
                const di = document.getElementById('dock-'+key);
                if(di) {
                    di.classList.add('active');
                    di.style.transform = 'translateY(-10px)';
                    setTimeout(()=>di.style.transform='translateY(0)', 300);
                }

                if(app.type === 'notes') this.loadNotes(wid);
                if(app.type === 'term') setTimeout(()=>document.getElementById('in-'+wid).focus(), 100);
            },

            close: function(wid) { document.getElementById(wid).remove(); },

            max: function(wid) {
                const w = document.getElementById(wid);
                if(w.style.width === '100%') {
                    w.style.width = '700px'; w.style.height = '500px'; w.style.top='50px'; w.style.left='50px'; w.style.borderRadius='12px';
                } else {
                    w.style.width = '100%'; w.style.height = 'calc(100% - 35px)'; w.style.top='35px'; w.style.left='0'; w.style.borderRadius='0';
                }
            },

            drag: function(e, wid) {
                const w = document.getElementById(wid);
                const dx = e.clientX - w.offsetLeft;
                const dy = e.clientY - w.offsetTop;
                const mv = (ev) => { w.style.left=(ev.clientX-dx)+'px'; w.style.top=(ev.clientY-dy)+'px'; };
                document.addEventListener('mousemove', mv);
                document.onmouseup = () => document.removeEventListener('mousemove', mv);
            },

            getContent: function(app, wid) {
                if(app.type === 'web') return `<div style="display:flex; flex-direction:column; height:100%;"><div class="browser-bar"><input class="url-input" value="${app.url}" onchange="document.getElementById('f-${wid}').src=this.value"></div><iframe id="f-${wid}" src="${app.url}" style="flex:1; border:none; background:white;"></iframe></div>`;
                
                if(app.type === 'iframe') return `<iframe src="${app.url}" style="width:100%; height:100%; border:none;"></iframe>`;
                
                if(app.type === 'store') {
                    let html = `<div style="padding:20px; display:grid; grid-template-columns:repeat(auto-fill, minmax(120px,1fr)); gap:15px;">`;
                    ['term', 'paint', 'media'].forEach(k => {
                        const a = System.appsDB[k];
                        html += `
                        <div style="background:#222; padding:15px; border-radius:10px; text-align:center;">
                            <i class="${a.icon}" style="font-size:2rem; color:${a.color}; margin-bottom:10px;"></i>
                            <div>${a.name}</div>
                            <button onclick="System.installApp('${k}')" style="margin-top:10px; background:var(--primary); border:none; padding:5px 15px; border-radius:5px; cursor:pointer;">ÿ™ÿ´ÿ®Ÿäÿ™</button>
                        </div>`;
                    });
                    return html + `</div>`;
                }

                if(app.type === 'settings') {
                    const walls = [
                        'https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072',
                        'https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?q=80&w=2072',
                        'https://images.unsplash.com/photo-1506744038136-46273834b3fb?q=80&w=2072',
                        'https://images.unsplash.com/photo-1534796636912-3b95b3ab5986?q=80&w=2072'
                    ];
                    let html = `<div class="settings-grid">`;
                    walls.forEach(url => {
                        html += `<div class="wall-thumb" style="background-image:url('${url}')" onclick="System.config.wallpaper='${url}'; System.saveConfig(); System.loadConfig();"></div>`;
                    });
                    return html + `</div>`;
                }

                if(app.type === 'notes') return `<textarea id="note-${wid}" style="width:100%; height:100%; background:#1a1a1a; color:white; border:none; padding:20px; font-size:1.1rem; resize:none;" placeholder="ÿßŸÉÿ™ÿ® ŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ŸÉ... ÿ≥Ÿäÿ™ŸÖ ÿ≠ŸÅÿ∏Ÿáÿß ÿ™ŸÑŸÇÿßÿ¶ŸäÿßŸã" oninput="localStorage.setItem('zenith_note', this.value)"></textarea>`;

                if(app.type === 'term') return `<div class="term-box" id="term-out-${wid}" onclick="document.getElementById('in-${wid}').focus()"><div>ZENITH OMEGA [Version 12.0]</div><br><div id="term-log-${wid}"></div><div style="display:flex;"><span>root@omega:~# </span><input id="in-${wid}" class="term-in" onkeypress="if(event.key==='Enter') WindowManager.runCmd('${wid}', this)"></div></div>`;

                if(app.type === 'files') return `<div style="padding:20px; text-align:center; color:#777; margin-top:20%;"><h3>ÿßŸÑŸÇÿ±ÿµ C:/</h3><p>ŸÖÿ≥ÿßÿ≠ÿ© ŸÅÿßÿ±ÿ∫ÿ©: 900 ÿ™Ÿäÿ±ÿßÿ®ÿßŸäÿ™</p></div>`;

                return `<div style="padding:20px;">${app.name}</div>`;
            },

            loadNotes: function(wid) {
                const saved = localStorage.getItem('zenith_note');
                if(saved) document.getElementById(`note-${wid}`).value = saved;
            },

            runCmd: function(wid, input) {
                const val = input.value.trim();
                const log = document.getElementById(`term-log-${wid}`);
                input.value = '';
                log.innerHTML += `<div>root@omega:~# ${val}</div>`;
                
                let res = '';
                if(val === 'help') res = 'Commands: help, date, clear, reboot, install [app]';
                else if(val === 'date') res = new Date().toString();
                else if(val === 'clear') { log.innerHTML = ''; return; }
                else if(val === 'reboot') location.reload();
                else if(val.startsWith('install ')) {
                    const app = val.split(' ')[1];
                    if(System.appsDB[app]) { System.installApp(app); res = `Installing ${app}... Done.`; }
                    else res = `Package ${app} not found.`;
                }
                else res = 'Command not found.';
                
                log.innerHTML += `<div style="color:#aaa; margin-bottom:10px;">${res}</div>`;
                document.getElementById(`term-out-${wid}`).scrollTop = document.getElementById(`term-out-${wid}`).scrollHeight;
            }
        };

        // Run
        System.init();

    </script>
</body>
</html>
