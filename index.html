<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HATIM SPACE | AI LEGENDARY</title>
    <style>
        :root { --primary: #00ff41; --bg: #050505; --sidebar: #0a0a0a; --page: #ffffff; }
        body { margin: 0; background: var(--bg); color: #eee; font-family: 'Segoe UI', sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ© */
        #login-screen { position: fixed; inset: 0; background: black; z-index: 10000; display: flex; align-items: center; justify-content: center; }
        .login-card { background: #111; padding: 50px; border-radius: 30px; border: 2px solid var(--primary); text-align: center; box-shadow: 0 0 30px var(--primary); }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ø¹Ù„ÙˆÙŠ */
        .toolbar { background: var(--sidebar); padding: 15px 25px; display: flex; gap: 15px; border-bottom: 1px solid #222; align-items: center; justify-content: space-between; }
        .t-btn { background: #151515; border: 1px solid #333; color: white; padding: 10px 20px; border-radius: 12px; cursor: pointer; transition: 0.3s; font-weight: bold; }
        .t-btn:hover { border-color: var(--primary); box-shadow: 0 0 10px var(--primary); }

        /* Ø²Ø± HATIM SPACE AI */
        .ai-btn { background: linear-gradient(45deg, #00ff41, #00d4ff); color: black; border: none; padding: 12px 25px; border-radius: 15px; cursor: pointer; font-weight: 900; animation: glow 2s infinite; }
        @keyframes glow { 0% { box-shadow: 0 0 5px #00ff41; } 50% { box-shadow: 0 0 20px #00d4ff; } 100% { box-shadow: 0 0 5px #00ff41; } }

        .main-container { flex: 1; display: flex; overflow: hidden; }

        /* Ø§Ù„Ø´Ø§Øª (KUL) */
        #chat-sidebar { width: 320px; background: var(--sidebar); border-left: 1px solid #222; display: flex; flex-direction: column; }
        #chat-messages { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .msg { background: #1a1a1a; padding: 15px; border-radius: 15px; border-right: 5px solid var(--primary); position: relative; }
        .msg b { color: var(--primary); font-size: 11px; display: block; margin-bottom: 5px; }

        /* Ø§Ù„Ù…Ø­Ø±Ø± (Notion Style) */
        .workspace { flex: 1; padding: 40px; overflow-y: auto; background: #080808; display: flex; justify-content: center; position: relative; }
        #editor { width: 100%; max-width: 850px; min-height: 1000px; background: var(--page); color: #111; padding: 80px; outline: none; border-radius: 20px; font-size: 19px; line-height: 1.8; box-shadow: 0 10px 50px rgba(0,0,0,0.8); }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø§Ø´ */
        #slash-menu { position: absolute; background: #111; border: 1px solid var(--primary); border-radius: 15px; width: 240px; display: none; z-index: 1000; padding: 10px; }
        .slash-item { padding: 12px; cursor: pointer; border-radius: 10px; color: white; transition: 0.2s; }
        .slash-item:hover { background: var(--primary); color: black; font-weight: bold; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <h1 style="color:var(--primary); font-size: 3rem; margin:0;">HATIM SPACE</h1>
            <p style="color:#666; letter-spacing: 5px; margin-bottom: 30px;">LEGENDARY AI EDITION</p>
            <input type="text" id="user-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù‚Ø§Ø¦Ø¯" style="width:80%; padding:15px; border-radius:10px; background:#000; color:white; border:1px solid #333;">
            <br><br>
            <button class="t-btn" style="width:80%; background:var(--primary); color:black;" onclick="start()">Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ ğŸš€</button>
        </div>
    </div>

    <header class="toolbar">
        <div style="display:flex; gap:10px;">
            <button class="t-btn" onclick="exec('bold')">B</button>
            <button class="t-btn" onclick="exec('italic')">I</button>
            <div class="color-picker" style="display:flex; gap:5px; margin-right:20px;">
                <div onclick="chCol('#00ff41')" style="width:20px; height:20px; background:#00ff41; border-radius:50%; cursor:pointer;"></div>
                <div onclick="chCol('#ff007b')" style="width:20px; height:20px; background:#ff007b; border-radius:50%; cursor:pointer;"></div>
                <div onclick="chCol('#00d4ff')" style="width:20px; height:20px; background:#00d4ff; border-radius:50%; cursor:pointer;"></div>
            </div>
        </div>
        <button class="ai-btn" onclick="window.open('https://gemini.google.com', '_blank')">âœ¨ HATIM SPACE AI</button>
    </header>

    <div class="main-container">
        <div class="workspace">
            <div id="editor" contenteditable="true">
                <h1>Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙŠØ§ Ù‚Ø§Ø¦Ø¯ ğŸª</h1>
                <p>Ø§ÙƒØªØ¨ <b>/</b> Ù„ØªÙØ¹ÙŠÙ„ Ù‚ÙˆÙ‰ HATIM SPACE AI...</p>
            </div>
            <div id="slash-menu">
                <div class="slash-item" onclick="ins('h1')">ğŸ“ Ø¹Ù†ÙˆØ§Ù† Ø£Ø³Ø·ÙˆØ±ÙŠ</div>
                <div class="slash-item" onclick="ins('code')">ğŸ’» ØµÙ†Ø¯ÙˆÙ‚ Ø¨Ø±Ù…Ø¬ÙŠØ§Øª</div>
                <div class="slash-item" onclick="ins('todo')">âœ… Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù… Ø§Ø­ØªØ±Ø§ÙÙŠØ©</div>
            </div>
        </div>

        <div id="chat-sidebar">
            <div style="padding:20px; border-bottom:1px solid #222; font-weight:bold; color:var(--primary);">Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø­ÙŠØ© â—</div>
            <div id="chat-messages"></div>
            <div style="padding:20px; background:#080808; border-top:1px solid #222;">
                <input type="text" id="chat-input" placeholder="ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚..." onkeypress="if(event.key==='Enter') send()" style="width:100%; background:#000; border:1px solid #333; color:white; padding:12px; border-radius:10px; outline:none;">
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ù„Ù‚Ø·Ø© Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
        const firebaseConfig = {
          apiKey: "AIzaSyBYW9x3xQvcZugc0mJx5iFbByPtGkXNx4M",
          authDomain: "hatim-space-4f7e8.firebaseapp.com",
          projectId: "hatim-space-4f7e8",
          databaseURL: "https://hatim-space-4f7e8-default-rtdb.firebaseio.com",
          storageBucket: "hatim-space-4f7e8.firebasestorage.app",
          messagingSenderId: "1014020499692",
          appId: "1:1014020499692:web:37e023621b0ff9ee59ddc9"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();
        let myName = "";

        function start() {
            const n = document.getElementById('user-name').value;
            if(n) {
                myName = n;
                document.getElementById('login-screen').style.display = 'none';
                listen();
                // ØªØ±Ø­ÙŠØ¨ HATIM SPACE AI Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ
                db.ref('messages').push({ 
                    name: "ğŸ¤– HATIM SPACE AI", 
                    text: "ØªÙ… ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¨Ø±ÙˆØªÙˆÙƒÙˆÙ„ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ! Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ ÙƒØ§Ø¨ØªÙ† " + myName + ". ÙƒÙŠÙ Ù†Ø³Ø­Ù‚ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙŠÙˆÙ…ØŸ" 
                });
            }
        }

        function chCol(h) { document.documentElement.style.setProperty('--primary', h); }

        const editor = document.getElementById('editor');
        const menu = document.getElementById('slash-menu');

        editor.addEventListener('keyup', (e) => {
            const sel = window.getSelection();
            if(sel.rangeCount > 0 && sel.getRangeAt(0).startContainer.textContent.endsWith('/')) {
                const rect = sel.getRangeAt(0).getBoundingClientRect();
                menu.style.display = 'block';
                menu.style.top = (rect.bottom + window.scrollY - 100) + 'px';
                menu.style.left = rect.left + 'px';
            } else { menu.style.display = 'none'; }
        });

        function ins(t) {
            editor.focus(); document.execCommand('delete', false, null);
            if(t === 'h1') document.execCommand('formatBlock', false, 'H1');
            if(t === 'code') document.execCommand('insertHTML', false, '<pre style="background:#222; color:#00ff41; padding:15px; border-radius:10px;">// Ø§ÙƒØªØ¨ ÙƒÙˆØ¯Ùƒ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠ Ù‡Ù†Ø§</pre>');
            if(t === 'todo') document.execCommand('insertHTML', false, '<div><input type="checkbox"> Ù…Ù‡Ù…Ø© Ù…Ù†Ø¬Ø²Ø©</div>');
            menu.style.display = 'none';
        }

        function send() {
            const i = document.getElementById('chat-input');
            if(i.value) { db.ref('messages').push({ name: myName, text: i.value }); i.value = ""; }
        }

        function listen() {
            db.ref('messages').limitToLast(20).on('child_added', (s) => {
                const d = s.val();
                const div = document.createElement('div');
                div.className = "msg";
                div.innerHTML = `<b>${d.name}</b> ${d.text}`;
                document.getElementById('chat-messages').appendChild(div);
                document.getElementById('chat-messages').scrollTop = 10000;
            });
        }
    </script>
</body>
</html>
